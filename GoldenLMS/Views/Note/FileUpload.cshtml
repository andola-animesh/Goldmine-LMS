@model IEnumerable<GoldenLMS.Models.LeadNote>

@{
    ViewBag.Title = "FileUpload";
    Layout = "~/Views/Shared/_LayoutPage.cshtml";
}
<link href="~/Content/css/jquery.fileupload.css" rel="stylesheet" />
	<script src="~/Scripts/jquery-1.9.1.min.js"></script>
	<script src="~/Scripts/jquery.ui.widget.js"></script>
	<script src="~/Scripts/bootstrap.min.js"></script>
	<script src="~/Scripts/jquery.fileupload.js"></script>
<div id="div_ld_act" class="bg-white b-1px-gray-light b-top-none brad-bottom brad-tr b-bot-2px-gray-light">
    <div class="col-md-12">
        <h2>Lead Activity</h2>
        <fieldset>
            <legend></legend>
            @foreach (var item in Model)
            {
                <div class="row">
                    <div class="col-md-3">
                        @Html.LabelFor(modelItem => item.Title, new { @class = "control-label" })
                    </div>
                    <div class="col-md-4">
                        @Html.DisplayFor(modelItem => item.Title, new { @class = "control-label" })
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-3">
                        @Html.LabelFor(modelItem => item.ContactPerson, new { @class = "control-label" })
                    </div>
                    <div class="col-md-4">
                        @Html.DisplayFor(modelItem => item.ContactPerson, new { @class = "control-label" })
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12" style="height: 10px;">
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-3">
                        @Html.LabelFor(modelItem => item.EmailId, new { @class = "control-label" })
                    </div>
                    <div class="col-md-4">
                        @Html.DisplayFor(modelItem => item.EmailId, new { @class = "control-label" })
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12" style="height: 10px;">
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-3">
                        @Html.LabelFor(modelItem => item.ContactNo, new { @class = "control-label" })
                    </div>
                    <div class="col-md-4">
                        @Html.DisplayFor(modelItem => item.ContactNo, new { @class = "control-label" })
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12" style="height: 10px;">
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-3">
                        @Html.LabelFor(modelItem => item.Value, new { @class = "control-label" })
                    </div>
                    <div class="col-md-4">
                        @Html.DisplayFor(modelItem => item.Value, new { @class = "control-label" })
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12" style="height: 10px;">
                    </div>
                </div>
                
                <div class="row">
                    <div class="col-md-3">
                        @Html.LabelFor(modelItem => item.Name, new { @class = "control-label" })
                    </div>
                    <div class="col-md-4">
                        @Html.DisplayFor(modelItem => item.Name, new { @class = "control-label" })
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12" style="height: 10px;">
                    </div>
                </div>
                break;
            }

        </fieldset>
        <div class="row">
            <div class="col-md-9 pull-right">
                @Html.ActionLink("Back to List", "StatusIndex", "Lead")
            </div>
        </div>

    </div>
</div>

<div class="row">
    <div class="col-md-12" style="height: 10px;">
        <hr />
    </div>
</div>

<div class="row">
    <div class="col-md-12" style="height: 10px;">
    </div>
</div>

<div id="div_nt_ath" class="bg-white b-1px-gray-light b-top-none brad-bottom brad-tr b-bot-2px-gray-light">
    <div class="col-md-12">
        <h4 id='show_nt_deal_div' style='margin-top: 0px; cursor: pointer'>
            <span class='glyphicon glyphicon-paperclip' style='color: #4C5264;'></span>
            Notes & Attachment
        </h4>
        <div class='form-group' id='deal_note_div' style='display: none; margin-bottom: 0px;'>
            <div style="margin: 0; padding: 0; display: inline">

                @using (Html.BeginForm("FileUpload", "Note", FormMethod.Post, new { enctype = "multipart/form-data" }))
                {
                    @Html.ValidationSummary(true);

                    <fieldset>
                        <legend></legend>

                        @*@Html.HiddenFor(model => model.Id)*@

                        <div class="row">
                            <div class="col-md-3">
                                Attachment
                            </div>
                            <div class="col-md-4">
                                @Html.TextBox("Attachment", "", new { type = "file" })
                                <span class="field-validation-error" id="spanfile"></span>
                            </div>
                            <br />
		                    @*<div class="progress">
			                    <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">
				                    <span class="sr-only">0% complete</span>
			                    </div>
		                    </div>*@
                        </div>
                        <div class="row">
                            <div class="col-md-12" style="height: 10px;">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-3">
                                Comment
                            </div>
                            <div class="col-md-4">
                                @Html.TextArea("Comment", "", new { @class = "form-control" })
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12" style="height: 10px;">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-9 pull-right">
                                <input type="submit" class="btn btn-success" id="btnSubmit" value="Submit"/>
                            </div>
                        </div>

                    </fieldset>
                }

            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-12" style="height: 10px;">
        <hr />
    </div>
</div>

<div class="row">
    <div class="col-md-12" style="height: 10px;">
    </div>
</div>

<div id="div_act_str" class="bg-white b-1px-gray-light b-top-none brad-bottom brad-tr b-bot-2px-gray-light">
    <div class="col-md-12">
        <div class="fl ic_act_stm" style="margin-left: 10px"></div>
        <h4 style='margin-top: 0px; cursor: pointer'>Activity Stream
        </h4>

        <table style="width: 100%;" class="table table-striped table-hover">
            <tr>
                <th style="width: 35%; padding-left: 2px;" class="control-label">Attachment
                </th>
                <th style="width: 45%; padding-left: 2px;" class="control-label">Comment
                </th>
                <th style="width: 20%; text-align: center;" class="control-label">Action
                </th>
            </tr>

            @foreach (var ntd in Model)
            {
                <tr>
                    <td style="width: 35%; padding-left: 2px;">
                        @Html.DisplayFor(modelItem => ntd.Attachment)
                    </td>
                    <td style="width: 45%; padding-left: 2px;">
                        @Html.DisplayFor(modelItem => ntd.Comment)
                    </td>
                    <td style="width: 20%; text-align: center;">
                        @Html.ActionLink("Edit", "Edit", new { id = ntd.NoteId, leadid = ntd.LeadId })
                        |
                        @Html.ActionLink("Delete", "Delete", new { id = ntd.NoteId, leadid = ntd.LeadId })
                    </td>
                </tr>
            }

        </table>
    </div>
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}

<script>
   
	$(document).ready(function () {
	    $('#fileupload').fileupload({
	        dataType: 'json',
	        url: '/Note/FileUpload',
	        autoUpload: false,
	        done: function (e, data) {
	            $('.file_name').html(data.result.name);
	            $('.file_type').html(data.result.type);
	            $('.file_size').html(data.result.size);
	        }
	    }).on('fileuploadprogressall', function (e, data) {
	        var progress = parseInt(data.loaded / data.total * 100, 10);
	        $('.progress .progress-bar').css('width', progress + '%');
	    });
	});

    $('#show_nt_deal_div').click(function () {
        $('#deal_note_div').slideToggle('slow');
    });

    $('#show_nt_editdeal_div').click(function () {
        $('#deal_editnote_div').slideToggle('slow');
    });
</script>
